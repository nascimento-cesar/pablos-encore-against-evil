function compute_extra_effects(extra_effects)
  if not extra_effects then
    return 0
  end

  local extra_effects = split(extra_effects, "_")
  local extra_effect = 0

  extra_effect |= extra_effects[1] and 2 or 0
  extra_effect |= extra_effects[2] and 4 or 0
  extra_effect += extra_effects[3] * 8
  extra_effect += extra_effects[4] * 24
  extra_effect += extra_effects[5] * 72

  return extra_effect
end

function get_button_index(button)
  return ({
    ["‚ùé"] = 1,
    ["üÖæÔ∏è"] = 2,
    ["‚¨ÖÔ∏è"] = 3,
    ["‚¨áÔ∏è"] = 4,
    ["‚û°Ô∏è"] = 5
  })[button]
end

function get_song_tracks(song_name)
  local track_1 = nil
  local track_2 = nil
  local track_3 = "P,1|D1,1,1,7,0,0_0_0_1_1|A0,1,1,7,0,0_0_0_1_1|B0,1,1,7,0,0_0_0_1_1|F#0,1,1,7,0,0_0_0_1_1|G0,1,1,7,0,0_0_0_1_1|D0,1,1,7,0,0_0_0_1_1|G0,1,1,7,0,0_0_0_1_1|A0,1,1,7,0,0_0_0_1_1|D1,1,1,7,0,0_0_0_1_1|A0,1,1,7,0,0_0_0_1_1|B0,1,1,7,0,0_0_0_1_1|F#0,1,1,7,0,0_0_0_1_1|G0,1,1,7,0,0_0_0_1_1|D0,1,1,7,0,0_0_0_1_1|G0,1,1,7,0,0_0_0_1_1|A0,1,1,7,0,0_0_0_1_1|D1,1,1,7,0,0_0_0_1_1|A0,1,1,7,0,0_0_0_1_1|B0,1,1,7,0,0_0_0_1_1|F#0,1,1,7,0,0_0_0_1_1|G0,1,1,7,0,0_0_0_1_1|D0,1,1,7,0,0_0_0_1_1|G0,1,1,7,0,0_0_0_1_1|A0,1,1,7,0,0_0_0_1_1|D1,1,1,7,0,0_0_0_1_1|A0,1,1,7,0,0_0_0_1_1|B0,1,1,7,0,0_0_0_1_1|F#0,1,1,7,0,0_0_0_1_1|G0,1,1,7,0,0_0_0_1_1|D0,1,1,7,0,0_0_0_1_1|G0,1,1,7,0,0_0_0_1_1|A0,1,1,7,0,0_0_0_1_1|D1,1,1,7,0,0_0_0_1_1|A0,1,1,7,0,0_0_0_1_1|B0,1,1,7,0,0_0_0_1_1|F#0,1,1,7,0,0_0_0_1_1|G0,1,1,7,0,0_0_0_1_1|D0,1,1,7,0,0_0_0_1_1|G0,1,1,7,0,0_0_0_1_1|A0,1,1,7,0,0_0_0_1_1|D1,1,1,7,0,0_0_0_1_1|A0,1,1,7,0,0_0_0_1_1|B0,1,1,7,0,0_0_0_1_1|F#1,1,1,7,0,0_0_0_1_1|G1,1,1,7,0,0_0_0_1_1|D1,1,1,7,0,0_0_0_1_1|G1,1,1,7,0,0_0_0_1_1|A0,1,1,7,0,0_0_0_1_1|D1,1,1,7,0,0_0_0_1_1|D1,1/8,1,7,0,0_0_0_1_1|D1,1/8,1,7,0,0_0_0_1_1|D1,1/8,1,7,0,0_0_0_1_1|D1,1/8,1,7,0,0_0_0_1_1|D1,1/8,1,7,0,0_0_0_1_1|D1,1/8,1,5,2"
  local track_4 = nil

  -- "F#2,1,1,5,2|E2,1/2,1,5,2|P,1/2|D2,1/2,1,5,2|P,1/8|D2,1/4,1,5,2|C#2,1/2,1,5,2|A1,1/4,1,5,2|D1,1/8,1,5,2|D1,1/8,1,5,2",

  return ({
    canon_rock = {
      track_1,
      track_2,
      track_3,
      track_4
    }
  })[song_name]
end

function parse_button_icon(button)
  return ({
    ["‚ùé"] = 4,
    ["üÖæÔ∏è"] = 5,
    ["‚¨ÖÔ∏è"] = 0,
    ["‚¨áÔ∏è"] = 3,
    ["‚û°Ô∏è"] = 1
  })[button]
end

function parse_duration(duration)
  return ({
    ["1"] = 1,
    ["1/2"] = 1 / 2,
    ["1/4"] = 1 / 4,
    ["1/8"] = 1 / 8,
    ["1/16"] = 1 / 16
  })[tostr(duration)]
end

function parse_pitch(pitch)
  return ({
    ["P"] = -1,
    ["C0"] = 0,
    ["C#0"] = 1,
    ["D0"] = 2,
    ["D#0"] = 3,
    ["E0"] = 4,
    ["F0"] = 5,
    ["F#0"] = 6,
    ["G0"] = 7,
    ["G#0"] = 8,
    ["A0"] = 9,
    ["A#0"] = 10,
    ["B0"] = 11,
    ["C1"] = 12,
    ["C#1"] = 13,
    ["D1"] = 14,
    ["D#1"] = 15,
    ["E1"] = 16,
    ["F1"] = 17,
    ["F#1"] = 18,
    ["G1"] = 19,
    ["G#1"] = 20,
    ["A1"] = 21,
    ["A#1"] = 22,
    ["B1"] = 23,
    ["C2"] = 24,
    ["C#2"] = 25,
    ["D2"] = 26,
    ["D#2"] = 27,
    ["E2"] = 28,
    ["F2"] = 29,
    ["F#2"] = 30,
    ["G2"] = 31,
    ["G#2"] = 32,
    ["A2"] = 33,
    ["A#2"] = 34,
    ["B2"] = 35,
    ["C3"] = 36,
    ["C#3"] = 37,
    ["D3"] = 38,
    ["D#3"] = 39,
    ["E3"] = 40,
    ["F3"] = 41,
    ["F#3"] = 42,
    ["G3"] = 43,
    ["G#3"] = 44,
    ["A3"] = 45,
    ["A#3"] = 46,
    ["B3"] = 47,
    ["C4"] = 48,
    ["C#4"] = 49,
    ["D4"] = 50,
    ["D#4"] = 51,
    ["E4"] = 52,
    ["F4"] = 53,
    ["F#4"] = 54,
    ["G4"] = 55,
    ["G#4"] = 56,
    ["A4"] = 57,
    ["A#4"] = 58,
    ["B4"] = 59,
    ["C5"] = 60,
    ["C#5"] = 61,
    ["D5"] = 62,
    ["D#5"] = 63
  })[pitch]
end